<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="description" content="Stephan's notes on technology"><meta name="author" content="Stephan Peijnik"><title>Stephan's blog (old posts page 2) | Stephan's blog</title><link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="assets/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"><link href="assets/css/rst.css" rel="stylesheet" type="text/css"><link href="assets/css/code.css" rel="stylesheet" type="text/css"><link href="assets/css/colorbox.css" rel="stylesheet" type="text/css"><link href="assets/css/theme.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS (en)" href="rss.xml"></head><body class="home blog">
    <script type="text/javascript">var addthis_config={"ui_language":"en"};</script><div id="wrap" style="width:850px">
        <div id="container" style="width:560px">
            
        <div class="postbox">
        <h1><a href="posts/200906update-manager-weekly-update-2.html">update-manager weekly update #2</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-06-19 03:27
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/gsoc.html"><span class="badge badge-info">gsoc</span></a>
                            <a class="tag" href="categories/python.html"><span class="badge badge-info">python</span></a>
                            <a class="tag" href="categories/debian.html"><span class="badge badge-info">Debian</span></a>
                            <a class="tag" href="categories/update-manager.html"><span class="badge badge-info">update-manager</span></a>
                            <a class="tag" href="categories/free-software.html"><span class="badge badge-info">free software</span></a>
                </span>
            </div>
        <p>First of all: yes, I skipped update #1. I was rather busy with some assignments and exams at university and didn't work that much on update-manager the past two weeks.<br><br>Anyways, this update contains everything that has happened since <a href="http://blog.peijnik.at/2009/05/27/update-manager-weekly-update-0/" title="update-manager weekly update #0 @blog.peijnik.at">update #0</a>.<br><br><strong>Changelog fetching</strong><br><br>The changelog fetching code has been added to update-manager. This means that the changelog will be shown in the details section now and should look the same it looked before. However, I have only written that code for Debian so far, but the Ubuntu part is on my TODO list.<br><br><strong>Documentation</strong><br><br>The documentation has been updated and uploaded to alioth and can be viewed <a href="http://update-manager.alioth.debian.org/doc/current/" title="update-manager documentation @update-manager.alioth.debian.org">here</a>. I have set up a python environment on alioth which allows building the documentation directly, rather than building it locally and uploading it then. Basically this works by having a separate python packages directory, containing some mock modules that are needed (think gtk and friends here), allowing us to build the docs without having to install all dependencies.<br>I am planning on elaborating on this method and how to create such an environment in one of my upcoming posts, so stay tuned if you could use something like this too.<br><br>Additionally to this environment the documentation has been updated a great deal, including more modules and containing documentation for previously undocumented methods and classes.<br><br><strong>Application module</strong><br><br>I have reworked some aspects of the UpdateManager.Application module, allowing me to do unit testing on pretty much every aspect of the class. The problem I fixed here is that Application directly called sys.exit when something went wrong and now raises exceptions, which contain the status code and are handled in the respective scripts (ie. "update-manager").<br><br><strong>Gtk Frontend and updates from another thread</strong><br><br>One thing I fixed was the problem caused by the changelog fetching code running in a separate thread and invoking a callback function that updates the UI. It seems as Gtk isn't that happy when you do this and the UI wouldn't be updated immediatly (it seemed that this only happened after some events, like scrolling the update list). This has been reworked and the callback function now checks if it was called from the main thread or not and calls gtk.gdk.threads_enter/_leave accordingly.<br><br><strong>Changelog Viewer</strong><br><br>After finishing the changelog fetching code I added the ChangelogViewer widget from previous update-manager versions again, supporting creation of links to launchpad and debian bugs (ie. LP:NNNNNN and Closes: #NNNNNN are now links) and displaying the version number in bold, among other things.<br><br><strong>Weeding out UpdateManager.Frontend.Gtk.utils</strong><br><br>Initially I just copied over the utils module from old update-manager to the new implementation, leaving every single function in there, but now I decided to weed out the module. The result is that only the functions actually used by this implementation remained in there. Related to this documentation of that module is pending and on my TODO list.<br><br><strong>Version number</strong><br><br>After a chat with my mentor we decided to bump update-manager's version to 0.200-pre. This should make it easier to distinguish from the old version and indicates that a lot has changed. The first release following the -pre series will be 0.200.0, which should then include all functionality old update-manager included.<br><br><strong>My TODO list for next week</strong><br><br>Ordered by priority<br></p><ul><br><li>Documentation of UpdateManager.Frontend.Gtk.utils and .ChangelogViewer modules</li><br><li>Ubuntu Distribution Specific code</li><br><li>More unit tests</li><br><li>Update list downloading in Gtk frontend</li><br></ul><p>
        <a href="posts/200906update-manager-weekly-update-2.html#disqus_thread" data-disqus-identifier="cache/posts/200906update-manager-weekly-update-2.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200906should-cli-debug-output-and-error.html">Should CLI debug output and error messages be localized in a GUI application?</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-06-02 07:55
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/gsoc.html"><span class="badge badge-info">gsoc</span></a>
                            <a class="tag" href="categories/python.html"><span class="badge badge-info">python</span></a>
                            <a class="tag" href="categories/debian.html"><span class="badge badge-info">Debian</span></a>
                            <a class="tag" href="categories/update-manager.html"><span class="badge badge-info">update-manager</span></a>
                            <a class="tag" href="categories/free-software.html"><span class="badge badge-info">free software</span></a>
                </span>
            </div>
        <p>Whilst working on update-manager I have been wondering whether I should use gettext for localizing debug output and error messages sent to stderr.<br>As for debug output itself I basically do not see the need for providing a localized version for each and every message sent to stderr, but as far as error messages are concerned I am uncertain.<br><br>The point is that update-manager (apart from its experimental text interface) is usually not launched from a terminal at all and so most users won't even see these messages ever. Also, I believe that every developer's English skills are good enough so that he or she is able to understand simple messages.<br>Error messages however might be useful to all users when they experience a problem with the software, but localizing those could make handling bug reports a bit harder, possibly having to translate the error message back to English before being able to see what has gone wrong.<br><br>So basically I am asking you: What do you think? Is it worth localizing these messages? What is your experience with localized or non-localized error and debug messages?<br><br>I would be glad if I could get some input from you, either as a comment to this article, via email to debian(dot)sp(dot)or(dot)at or through the <a href="http://lists.alioth.debian.org/mailman/listinfo/update-manager-devel" title="update-manager-devel listinfo @lists.alioth.debian.org">update-manager-devel</a> mailing list.</p>
            
    <p>
        <a href="posts/200906should-cli-debug-output-and-error.html#disqus_thread" data-disqus-identifier="cache/posts/200906should-cli-debug-output-and-error.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200906sphinx-aware-enums-in-python.html">sphinx-aware Enums in Python</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-06-01 19:20
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/gsoc.html"><span class="badge badge-info">gsoc</span></a>
                            <a class="tag" href="categories/python.html"><span class="badge badge-info">python</span></a>
                            <a class="tag" href="categories/debian.html"><span class="badge badge-info">Debian</span></a>
                            <a class="tag" href="categories/update-manager.html"><span class="badge badge-info">update-manager</span></a>
                </span>
            </div>
        <p>As I promised to keep you updated on recent developments on update-manager I am writing this article. Just as a disclaimer: I am not going to write about any recent developments here, but would rather like to point at a piece of code I added to update-manager that could be useful in other applications too.<br><br>Now, as the title suggests there are sphinx-aware Enums in update-manager. Enums are common constructs in other programming languages like C and allow simple creation of constants with, for example, ascending values (first constant has value 0, second has value 1 and so on). Python unfortunately does not include support for Enums itself, but I found it rather easy to write classes that emulate such a construct.<br><br>Nothing is new about Enums in Python and there are probably quite a few different implementations out there, but I believe mine is different. The sphinx-aware part means that my implementation automagically updates the docstrings of the created instances and thus allows sphinx' "autodata" method to include sensible information in generated API documentation.<br><br>I could go on writing about and praising my method, but I believe a short example gives you a better idea how my implementation works and what I wanted to achieve with this. Have a look at <a href="http://update-manager.alioth.debian.org/doc/current/api/api/UpdateManager/Backend/index.html#UpdateManager.Backend.RELOAD_CACHE_STATUS" title="UpdateManager.Backend.RELOAD_CACHE_STATUS Enum (update-manager API doc) @update-manager.alioth.debian.org">this page</a>, which is part of update-manager's new API documentation. You should see rather well-looking documentation of the <em>UpdateManager.Backend.RELOAD_CACHE_STATUS</em> NegativeEnum, the defined constants, their values and some additional information about each value now.<br><br>Still, nothing too fancy, HTML documentation generated from docstrings. What makes this special is the code from which it was generated:<br><br></p><pre class="python" name="code">RELOAD_CACHE_STATUS = NegativeEnum(<br>  BEGIN = "Started reloading package cache",<br>  DONE = "Finished reloading package cache")</pre><br><br>This not only gives us a <em>RELOAD_CACHE_STATUS</em> enum, along with the <em>RELOAD_CACHE_STATUS.BEGIN</em> and <em>RELOAD_CACHE_STATUS.DONE</em>, but also some documentation, included in <em>RELOAD_CACHE_STATUS</em>' docstring, that can be used by sphinx.<br><br>You can find the Enum code, which is rather short and should be quite easy to understand, <a href="http://bzr.debian.org/loggerhead/update-manager/devel/gsoc09/annotate/head:/UpdateManager/Util/enum.py?" title="UpdateManager/Util/enum.py @bzr.debian.org/loggerhead">here</a>. I hope you find this code as useful as I do.
            
    <p>
        <a href="posts/200906sphinx-aware-enums-in-python.html#disqus_thread" data-disqus-identifier="cache/posts/200906sphinx-aware-enums-in-python.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200905update-manager-on-alioth.html">update-manager on alioth</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-05-28 12:44
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/gsoc.html"><span class="badge badge-info">gsoc</span></a>
                            <a class="tag" href="categories/debian.html"><span class="badge badge-info">Debian</span></a>
                            <a class="tag" href="categories/update-manager.html"><span class="badge badge-info">update-manager</span></a>
                            <a class="tag" href="categories/free-software.html"><span class="badge badge-info">free software</span></a>
                </span>
            </div>
        <p>As I noted in this weeks <a href="http://blog.peijnik.at/2009/05/27/update-manager-weekly-update-0/" title="update-manager weekly update #0 @blog.peijnik.at">update-manager progress update</a> one of my tasks was to create an <a href="http://alioth.debian.org" title="alioth.debian.org">alioth.debian.org</a> project and get my branches uploaded to Debian.<br><br>I did not imagine that alioth admins (hi there, a huge "thank you" goes to you guys) would be this fast with reviewing and accepting the project and enabling bazaar support for me.<br>Anyways, the project has been accepted and its <a href="https://alioth.debian.org/projects/update-manager/" title="update-manager project @alioth.debian.org">new home</a> is on alioth. I have also already uploaded both my <a href="http://bzr.debian.org/loggerhead/update-manager/devel/gsoc09/" title="my update-manager branch @bzr.debian.org">update-manager branch</a> and <a href="http://bzr.debian.org/loggerhead/users/speijnik-guest/python-apt/gsoc09" title="my python-apt branch @bzr.debian.org">python-apt branch</a> to bzr.debian.org<br><br>Additionally I have generated the <a href="http://update-manager.alioth.debian.org/doc/current/api/" title="update-manager API documentation @update-manager.alioth.debian.org">API documentation</a>, which is also hosted on alioth, and created a development disccusion mailing list, <a href="http://lists.alioth.debian.org/mailman/listinfo/update-manager-devel" title="update-manager-devel listinfo @lists.alioth.debian.org">update-manager-devel at lists.alioth.debian.org</a>.<br><br>If you are interested in this project feel free to have a look at what I've done so far and join the development discussion. Comments, critizism and ideas are always welcome.</p>
            
    <p>
        <a href="posts/200905update-manager-on-alioth.html#disqus_thread" data-disqus-identifier="cache/posts/200905update-manager-on-alioth.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200905update-manager-weekly-update-0.html">update-manager weekly update #0</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-05-28 00:52
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/gsoc.html"><span class="badge badge-info">gsoc</span></a>
                            <a class="tag" href="categories/debian.html"><span class="badge badge-info">Debian</span></a>
                            <a class="tag" href="categories/update-manager.html"><span class="badge badge-info">update-manager</span></a>
                            <a class="tag" href="categories/free-software.html"><span class="badge badge-info">free software</span></a>
                </span>
            </div>
        <p>It has been more than a month since I last wrote about my work on update-manager during this year's Google Summer Of Code and I am somewhat ashamed I wasn't able to provide you with updates more regularly.<br><br>So first of all, yes, I did do some work and yes, there has been quite some progress. Basically both private and university stuff have kept me from writing and that's why I'd like to start with this series of weekly updates today.<br>This series are meant to summarize what has happened during a week of writing code and give you an overview of what's happening. This first issue however will sum up the past month.<br><br>So let me begin explaining what has happened since my <a href="http://blog.peijnik.at/2009/04/24/update-manager-to-become-more-modular/" title="update manager to become more modular @blog.peijnik.at">last post</a>.<br><br><a name="more"></a><strong>update-manager bazaar repository</strong><br><br>All code I have written so far is available through a public bazaar branch on <a href="http://launchpad.net" title="launchpad.net">launchpad.net</a>. My branch's page can be found <a href="https://code.launchpad.net/~speijnik/update-manager/distribution-independent" title="my update-manager branch @code.launchpad.net">here</a> and provides you with its history and of course instructions on how to obtain the code. The location is only temporary though, as I am going to move hosting over to <a href="http://alioth.debian.org" title="alioth.debian.org">alioth.debian.org</a>. This is on my task list for next week.<br><br><strong>modular design</strong><br><br>I have ripped apart nearly all of update-manager and put it together in a more modular way, which should implementing new frontends or backends more easy, whilst also simplifying code maintenance.<br><br>The new design consists of four major parts:<br></p><ul><br><li>The application class is responsible for parsing command line arguments, initializing all other components correctly and coordinate communication between the frontend and the backend.</li><br><li>The backend itself is defined through the UpdateManager.Backend.BackendBase class and each implementation subclasses BackendBase. It is responsible for interacting with apt.</li><br><li>The frontend is again defined through a base class, UpdateManager.Frontend.FrontendBase. This part of update-manager provides the userinterface, handles user input and starts operations accordingly.</li><br><li>Lastly there is the distribution-specific part, which lives inside the UpdateManager.DistSpecific Python module and is defined by its own base class, DistBase.</li><br></ul><br><strong>backend implementation</strong><br><br>When I started working on update-manager it heavily relied on synaptic and used it to do the dirty-work. However, together with my mentor, mvo, I decided to drop synaptic support and rather concentrate on using python-apt. This means that the only backend implementation right now is a python-apt backend.<br><br>The python-apt backend is currently a work in progress, but already includes some basic functionality. Right now it can (re-)load the package cache and package lists and is able to provide a list of packages which are upgradable to the frontend.<br>Whilst implementing these functions I noticed some shortcomings of python-apt itself, fixed those and got mvo included in <a href="https://code.launchpad.net/~mvo/python-apt/python-apt--mvo" title="mvo's python-apt branch @code.launchpad.net">his python-apt branch</a> at launchpad.<br><br><strong>frontend implementation</strong><br><br>I started re-implementing the Gtk frontend as provided through current update-manager and right now it visualizes the package cache reloading process and provides users with a list of upgradable packages. However, that's pretty much all of the functionality it includes right now, which is why implementing more functions is pretty much on the top of my todo list.<br><br>Additionally I have ported the text frontend, as included in Ubuntu, to the new modular system, and this frontend's code really shows how easy adding a frontend with the new modular design is. This frontend contains the same functionality as the Gtk frontend.<br><br><strong>distribution specific code</strong><br><br>The core described above does not include any distribution specific code anymore, which is the main focus of this project. The implementations of distribution-specific functionality contains classifiers for update categories for both Debian and Ubuntu, whilst I focused on getting things right with the Debian implementation for now. These classifiers allow the frontend to let the user know which kind of update they are about to install, like a security update, a recommended upgrade or a third-party (unofficial) upgrade.<br><br><strong>documentation</strong><br><br>As update-manager was poorly (read: hardly at all) documented I started documenting the API using sphinx. However, right now the generated documentation cannot be found anywhere yet. This should change as soon as an alioth project for update-manager has been created.<br><br><strong>next week's tasks</strong><br><br>I would also like to provide you with my task list for the coming week. The list, ordered by priority, is:<br><ul><br><li>Register an alioth project and move the bazaar branch to bzr.debian.org</li><br><li>Generate an HTML version of the API documentation and put it on alioth.</li><br><li>Implement changelog-fetching for the Debian-specific module and make use of that from within the code and the Gtk frontend.</li><br></ul><br>As you can see this list is rather short. This can mainly be attributed to a few university assignments, and instead of providing a long list of tasks which I probably won't be able to finish I rather keep the list short and hopefully get things not on this list done too.
            
    <p>
        <a href="posts/200905update-manager-weekly-update-0.html#disqus_thread" data-disqus-identifier="cache/posts/200905update-manager-weekly-update-0.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200904update-manager-to-become-more-modular.html">update manager to become more modular</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-04-24 18:41
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/gsoc.html"><span class="badge badge-info">gsoc</span></a>
                            <a class="tag" href="categories/free-software.html"><span class="badge badge-info">free software</span></a>
                </span>
            </div>
        <p>In my <a href="http://blog.peijnik.at/2009/04/21/summer-of-code-2009-working-for-debian/" title="Summer Of Code 2009: Working for Debian @ blog.peijnik.at">last post</a> I wrote about how I got accepted for GSoC09 and am going to work on <a href="https://launchpad.net/update-manager" title="update-manager @ launchpad.net">update manager</a>. Now I couldn't wait for the actual GSoC09 coding period to start and created my own <a href="https://code.launchpad.net/~speijnik/update-manager/distribution-independent" title="update-manager/distribution-independent branch @ code.launchpad.net">update manager branch</a> right away and started hacking.<br><br>So far I have only written a few lines of code, but my mentor Michael Vogt and me came to the conclusion that whilst working on the internals of update manager it might be a good idea to make the whole program more modular.<br>Right now all the different functions of update manager (being the UI/frontend and the package manager interface/backend) are mixed up in various files, which makes not only reading the code harder, but also extending update manager more difficult. This was reason enough for me to have a look into making update manager more modular in its design and some of my efforts can already be seen in my update manager branch.<br><br>If you have any comments on the proposed backend interface or see major problems with it, please let me know, I would really appreciate some input on that. Also, the UI and the distribution-specific code interfaces are next on my list, before beginning to actually move existing code around. I hope to be able to finish that work before the GSoC hacking period starts, so I can concentrate entirely on my task of making update-manager distribution independent.</p>
            
    <p>
        <a href="posts/200904update-manager-to-become-more-modular.html#disqus_thread" data-disqus-identifier="cache/posts/200904update-manager-to-become-more-modular.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200904summer-of-code-2009-working-for-debian.html">Summer Of Code 2009: Working for Debian</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-04-21 08:10
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/foss.html"><span class="badge badge-info">foss</span></a>
                            <a class="tag" href="categories/gsoc.html"><span class="badge badge-info">gsoc</span></a>
                            <a class="tag" href="categories/debian.html"><span class="badge badge-info">Debian</span></a>
                </span>
            </div>
        <p>Yesterday Google announced the students and projects that have been accepted for Google Summer Of Code 2009 and guess what: <a href="http://wiki.debian.org/SummerOfCode2009/Distribution_independent_update_manager" title="Distribution-independent update-manager @ wiki.debian.org">my project</a> was accepted. This means I will be working full-time on FOSS this summer.<br><br>So I guess it's about time to introduce my project to you: Distribution-independent update manager, mentored by <a href="https://launchpad.net/~mvo" title="mvo @ launchpad.net">Michael Vogt (mvo)</a>.<br><br>Okay, I believe some of you might wonder what this project is all about, as <a href="http://packages.qa.debian.org/u/update-manager.html" title="update-manager @ packages.qa.debian.org">update-manager</a> is in the Debian package archive already. There is a problem with update-manager though. As you see in the package's version number (it contains ".debian") update-manager has been adapted for use in Debian. Also, Debian contains update-manager 0.68 right now, whilst upstream (Ubuntu in this case) has released <a href="http://bazaar.launchpad.net/~ubuntu-core-dev/update-manager/main/revision/1374" title="update-manager revision log @ bazaar.launchpad.net">0.111.6</a> (actually there were quite a few upstream versions meanwhile). The reason Debian is nowhere near being up-to-date with upstream is that right now a lot of effort has to be put into porting update-manager to Debian every time a new upstream release is made, because certain Ubuntu-specific functionality breaks update-manager in more or less severe ways on Debian.<br><br>This leads me directly to what my project is about: making update-manager (Ubuntu-) distribution-independent, but not package manager independent.<br>There are 6 main goals for this project, which I will be working on in the order below.<br></p><ul><br><li>Analyzing the code and identifying Ubuntu-specific parts.</li><br><li>Creating a distribution-plugin interface and moving the Ubuntu-specific parts into a distribution-plugin, creating a core package that is distribution-independent.</li><br><li>Creating a special notification for important/security related updates and providing the code that handles updates from security.debian.org as such.</li><br><li>Creating a backend-plugin interface, moving the synaptics backend into a backend-plugin and optionally create a python-apt based plugin.</li><br><li>UI redesign, providing a simpler interface to average joe, whilst allowing more experienced users to optionally display more information.</li><br><li>Automatic downloading &amp; installation of updates. This is still up to discussion, as automatic downloading is already provided by software-properties (-gtk and -kde) and automatic installation can be handled by unattended-upgrades. Both packages are part of Debian already.</li><br></ul><br>Please note that this list should not be considered final and may be extended or modified over time. It exists to give you an overview of what exactly my project is about and how I am planning on carrying out the tasks.<br><br>Finally I wanted to let you know that I will keep you posted on the progress I am making, via this blog. Alternatively a blog aggregator for Debian's GSoC students has been set up over at <a href="http://soc.alioth.debian.org/feeds/blogs/" title="Debian's GSoC blog aggregator">http://soc.alioth.debian.org/feeds/blogs/</a>, where you can not only find my posts, but those of all of Debian's students.
            
    <p>
        <a href="posts/200904summer-of-code-2009-working-for-debian.html#disqus_thread" data-disqus-identifier="cache/posts/200904summer-of-code-2009-working-for-debian.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200904python-everywhere-computer-games.html">Python everywhere: computer games</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-04-02 18:35
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/foss.html"><span class="badge badge-info">foss</span></a>
                            <a class="tag" href="categories/technology.html"><span class="badge badge-info">Technology</span></a>
                            <a class="tag" href="categories/everywhere.html"><span class="badge badge-info">everywhere</span></a>
                </span>
            </div>
        <p>This is the second article in my series Python everywhere and covers the use of Python for in computer games. The first article of this series covered the use of Python for the conficker worm scanner tool and can be found <a href="http://blog.peijnik.at/2009/03/31/python-everywhere-conficker-scanner/" title="Python everywhere: conficker scanner">here</a>.<br><a name="more"></a><strong>Games written in Python</strong><br><br>As <a href="http://www.pygame.org/" title="pygame.org">PyGame</a> provides a nice library for writing games purely in Python it is becoming more common to use Python for this task too. The book "<a href="http://www.apress.com/book/view/9781590598726" title="Beginning Game Development with Python and Pygame  @ apress.com">Beginning Game Development with Python and Pygame</a>" is linked directly from the PyGame homepage, and thus is probably a good resource if you want to start writing games in Python.<br><br>However, I do not want to go into detail on how this library works, but rather provide you with a few examples of games written in Python. To provide you with a few examples I had a look at the <a href="http://www.pyweek.org/" title="pyweek.org">PyWeek</a> homepage. PyWeek is a Python Game Programming Challenge which invites everyone to participate, so the winners of this contest are of high-quality, and I'm showing you the latest two winners.<br><br>There are always two winners of PyWeek in for indivduals who have created games and teams. The latest winners are "<a href="http://www.pyweek.org/e/Rambo/" title="Team Rambo @ pyweek.org">Team Rambo</a>" in the individual effort category and "<a href="http://www.pyweek.org/e/midnightsun/" title="Midnight Sun @ pyweek.org">Midnight Sun</a>" with their two-man team.<br><br><strong>PyWeek: Team Rambo's Stringrolled (individual)</strong><br></p><p style="text-align: left;">Stringrolled makes use of the pygame library I mentioned earlier and is a <a href="http://en.wikipedia.org/wiki/Platform_game" title="Platform game @ en.wikipedia.org">platform game</a>. In a mere 2377 lines of code, including comments and blank lines, Team Rambo created an impressive game, coming with a story, easy-to-learn controls and nice 2D-graphics, screenshot below. <a href="http://media.pyweek.org/dl/7/Rambo/pyweek3.png"><img alt="Stringrolled screenshot @ media.pyweek.org" class="aligncenter" height="240" src="http://media.pyweek.org/dl/7/Rambo/pyweek3.png" title="Screenshot of Stringrolled" width="384"></a></p><br><p style="text-align: left;"><strong>PyWeek: Midnight Sun's Kite Story</strong></p><br><p style="text-align: left;">Kite Story is yet another interesting game, with game mechanics I have not seen ever before. You are controlling a kite with your mouse and are trying to catch objects, such as bees and birds, with the kite's rope. So what you basically do you draw a loop around an object with<a href="http://media.pyweek.org/dl/7/midnightsun/ss2.png"><img alt="Kite Story screenshot @ media.pyweek.org" class="alignleft" height="359" src="http://media.pyweek.org/dl/7/midnightsun/ss2.png" title="Kite Story: catching a sky diver" width="357"></a> your mouse and that way catch it. Every third cought object you advance to the next level, but keep in mind not to collide with the objects, because you will lose them and in turn be doing the previous level again, screenshot below. It should be noted that this game does not make use of PyGame at all, but rather relies on <a href="http://pyglet.org/" title="pyglet.org">pyglet</a>, and is 1997 lines of code in length, again counting blank lines and comments too.</p><br><p style="text-align: left;"></p><br><p style="text-align: left;"></p><br><p style="text-align: left;"></p><br><p style="text-align: left;"></p><br><p style="text-align: left;"></p><br><p style="text-align: left;"></p><br><p style="text-align: left;"></p><br><p style="text-align: left;"></p><br><p style="text-align: left;"></p><br><p style="text-align: left;"></p><br><p style="text-align: left;"><strong>Games using Python</strong></p><br><br><p style="text-align: left;">You have seen now that it is possible to write a game completely in Python, but there's another use-case of Python in games: scripting.<br>Some (proprietary) games, such as <a href="http://www.2kgames.com/civ4/blog_03.htm" title="Modding Sid Meier's Civilization IV @ 2kgames.com">Civilization IV</a>, offer Python support in their editors and SDKs. This quote from the article at 2kgames.com should give you a good idea of what can be done using Python in Civilization IV:<br></p><blockquote><br><p style="text-align: left;">The next level offers <strong>Python and XML</strong> support, letting modders with more experience manipulate the game world and everything in it. XML (eXtensible Markup Language) files can be edited in standard text editors or in special XML file editors that have ease-of-use features like a grid view. Editing these files will allow players to tweak simple game rules and change or add content. For instance, they can add new unit or building types, change the cost of wonders, or add new civilizations. Players can also change the sounds played at certain times or edit the play list for your soundtrack. NOTE: You can have custom soundtracks simply by adding music to the custom folder. You only need to edit the XML in order to assign certain pieces to specific eras or remove certain pieces.</p><br></blockquote><br><blockquote>The Python scripting language is fully integrated throughout the game and offers experienced modders a chance to really strut their stuff! People with some programming skills will be able to do things to alter the game in interesting and extraordinary ways. For instance, all of the game interface screens are exposed to Python, so modders will be able to change the information that's displayed, as well as how it's positioned on the screen. We also use Python to create and generate all of the random map scripts that are included in the game. So, players will now have the ability to add scripted events to the game like automatically generating units when a tile is reached, having specific situations trigger automatic war, or get this, bringing back Civil Wars caused by unrest, Civ II style!</blockquote><br><a href="http://www.eveonline.com/" title="EVE Online Homepage">EVE Online</a> is another game making use of Python, as an <a href="http://www.eveonline.com/devblog.asp?a=blog&amp;bid=488" title="stackless python 2.5 @ eveonline.com">article</a> over at eveonline.com points out.<br><br><strong>Python everywhere - also in compuater games</strong><br><br>Even though I am sure you can come up with a lot more examples of Python being used in computer games I think I have proven my point. Python is being used not only to create computer games, but sometimes also to provide developers with a way of extending games. To me personally it feels as if adoption of Python for this very task is increasing too, and I expect Python to be used even more by the game development community in the future.<br><br>You can expect the third part of this series to be released in about a week, so please check back regularly if you like the series.
            
    <p>
        <a href="posts/200904python-everywhere-computer-games.html#disqus_thread" data-disqus-identifier="cache/posts/200904python-everywhere-computer-games.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200904problems-running-php-as-separate.html">Problems running PHP as a separate FastCGI process</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-04-01 13:06
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/technology.html"><span class="badge badge-info">Technology</span></a>
                            <a class="tag" href="categories/sysadmin.html"><span class="badge badge-info">sysadmin</span></a>
                            <a class="tag" href="categories/observations.html"><span class="badge badge-info">observations</span></a>
                </span>
            </div>
        <p>As some of you might have noticed this webserver has not been that responsive in the past few hours and I have been working hard on getting that fixed. I finally identified the problem and was able to fix it.<br><br>The root of the problem was my setup running PHP as a separate FastCGI process. Unfortunatly it seems as if PHP can only handle 500 requests per FastCGI process and then seems to lock up.<br>The old setup of this site didn't cause such problems and it seems the problem lies in not setting the <em>PHP_FCGI_CHILDREN</em> and <em>PHP_FCGI_MAX_REQUESTS</em> environment variables with the new setup.<br><br><a name="more"></a><br><br>I initially thought that the default values of those environment variables were safe, but they are not. As I already wrote PHP seems to lock up after 500 requests and the solution lies in changing <em>PHP_FCGI_CHILDREN</em>, which defaults to 0 (no additional processes) to something bigger than 0 (I am using 2 children to make sure I have at least one PHP process reading for answering requests at any time).<br>Why? Quite simple, if you increase the value the PHP root process becomes some sort of manager and delegates requests to the children, as expected. However, using <em>PHP_FCGI_MAX_REQUESTS</em> it only forwards the specified number of requests to a child process before killing it and starting a new one. <strong>Problem solved</strong>.<br><br>Information on this behaviour can not be found in the PHP online manual, but rather at <a href="http://lxr.php.net/source/php-src/sapi/cgi/README.FastCGI" title="README.FastCGI @ lxr.php.net">http://lxr.php.net/source/php-src/sapi/cgi/README.FastCGI</a>.</p>
            
    <p>
        <a href="posts/200904problems-running-php-as-separate.html#disqus_thread" data-disqus-identifier="cache/posts/200904problems-running-php-as-separate.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200903python-everywhere-extending.html">Python everywhere: extending applications with Python</a></h1>
            <div class="meta" style="background-color: rgb(234, 234, 234); ">                    
                <span class="authordate">
                    Posted: 2009-03-31 15:33
                </span>
                <br><span class="tags">Tags: 
                            <a class="tag" href="categories/foss.html"><span class="badge badge-info">foss</span></a>
                            <a class="tag" href="categories/technology.html"><span class="badge badge-info">Technology</span></a>
                            <a class="tag" href="categories/everywhere.html"><span class="badge badge-info">everywhere</span></a>
                </span>
            </div>
        <p>Extending applications with Python: gimp, Evolution, Inkscape, Paint Shop Pro, [...]</p>
            
    <p>
        <a href="posts/200903python-everywhere-extending.html#disqus_thread" data-disqus-identifier="cache/posts/200903python-everywhere-extending.html">Comments</a>

        </p></div>
    
<div>
<ul class="pager"><li class="previous">
        <a href="index-1.html">← Newer posts</a>
    </li>
    <li class="next">
        <a href="index-3.html">Older posts →</a>
    </li>
</ul></div>

    
       <script type="text/javascript">var disqus_shortname="speijnikblog";(function(){var a=document.createElement("script");a.async=true;a.type="text/javascript";a.src="http://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)}());</script></div>
        <div id="sidebar">
            <!--Sidebar content-->
            <h1 id="blog-title">
                <a href="." title="Stephan's blog">Stephan's blog</a>
            </h1>
            
            
            <ul class="unstyled"><li>
            
    <!-- Social buttons -->
    <div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
    <a class="addthis_button_more">Share</a>
    <ul><li><a class="addthis_button_facebook"></a>
    </li><li><a class="addthis_button_google_plusone_share"></a>
    </li><li><a class="addthis_button_linkedin"></a>
    </li><li><a class="addthis_button_twitter"></a>
    </li></ul></div>
    <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script><!-- End of social buttons --></li><li><a href="archive.html">Archives</a>
            </li><li><a href="categories/index.html">Tags</a>
            </li><li><a href="rss.xml">RSS</a>

            </li><li>
            </li></ul></div>
        <div id="footer">
            Contents © 2013         <a href="mailto:stephan@peijnik.at">Stephan Peijnik</a> - Powered by         <a href="http://nikola.ralsina.com.ar">Nikola</a>
        </div>
    </div>
    
</body></html>